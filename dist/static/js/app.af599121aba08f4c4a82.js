webpackJsonp([1],{"+JmE":function(t,e,n){"use strict";n.d(e,"a",function(){return a}),n.d(e,"b",function(){return i});var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"tabs-wrap"},[n("div",{staticClass:"ul-wrap"},[n("ul",t._l(t.tabs,function(e,a){return n("li",{key:a,class:t.active===a?"active":"",style:{width:t.width},on:{click:function(e){t.tabClick(a)}}},[t._v("\n        "+t._s(e.value)+"  \n      ")])}))]),t._v(" "),n("div",{staticClass:"tab-content-wrap"},[t._t("default")],2)])},i=[]},"+y7f":function(t,e,n){"use strict";e.a={props:{author:Object,reply:Object}}},"/rLC":function(t,e){},"01yE":function(t,e){},"076A":function(t,e){},"0Ea2":function(t,e,n){"use strict";n.d(e,"a",function(){return a}),n.d(e,"b",function(){return i});var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"user"},[n("van-nav-bar",{attrs:{title:t.title}}),t._v(" "),n("div",{staticClass:"content-wrap"},[n("div",{staticClass:"avatar-area"},[t.isLogin?[n("img",{staticClass:"avatar",attrs:{src:t.getAvatar,alt:"avatar"}})]:[n("div",{staticClass:"avatar"})]],2),t._v(" "),n("van-cell-group",[t.isLogin?[n("van-cell",{attrs:{title:"个人信息","is-link":""},on:{click:t.goPersonCenter}}),t._v(" "),n("van-cell",{attrs:{title:"我的收藏","is-link":""},on:{click:t.goMyCollection}}),t._v(" "),n("van-cell",{attrs:{title:"新建话题","is-link":""},on:{click:t.goCreateTopic}}),t._v(" "),n("van-cell",{attrs:{title:"我的话题","is-link":""},on:{click:t.goMyTopics}})]:[n("van-cell",{attrs:{title:"个人信息","is-link":""},on:{click:t.toast}}),t._v(" "),n("van-cell",{attrs:{title:"我的收藏","is-link":""},on:{click:t.toast}}),t._v(" "),n("van-cell",{attrs:{title:"新建话题","is-link":""},on:{click:t.toast}}),t._v(" "),n("van-cell",{attrs:{title:"我的话题","is-link":""},on:{click:t.toast}})]],2),t._v(" "),t.isLogin?[n("van-button",{attrs:{type:"danger"},on:{click:t.goOut}},[t._v("退出")])]:[n("van-button",{attrs:{type:"primary"},on:{click:t.goLogin}},[t._v("登录")])]],2)],1)},i=[]},"3bEh":function(t,e){},"3f9b":function(t,e){},"6/+i":function(t,e,n){"use strict";var a=(n("NYxO"),n("svOl")),i=n("A82U");e.a={components:{Comment:i.a,SwitchBar:a.a},data:function(){return{text:"回到话题"}},computed:{replies:function(){return this.$store.state.topic.detail.replies}},methods:{back:function(){this.$router.go(-1)},gotoPath:function(t){t?sessionStorage.token?this.$store.dispatch("topic/reply",{comment:t,user:this.$store.state.login.user}):this.$toast.fail("登录后才可评论"):this.back()}}}},"6Csb":function(t,e,n){"use strict";function a(t){n("o3Tq")}var i=n("XnXy"),s=n("D1dt"),o=n("XyMi"),r=a,c=Object(o.a)(i.a,s.a,s.b,!1,r,"data-v-4714b139",null);e.a=c.exports},"8waJ":function(t,e,n){"use strict";n.d(e,"a",function(){return a}),n.d(e,"b",function(){return i});var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("van-cell",{staticClass:"comment"},[n("div",{staticClass:"head"},[n("img",{staticClass:"avatar",attrs:{src:t.comment.author.avatar_url,alt:""}}),t._v(" "),n("span",{staticClass:"loginname"},[t._v(t._s(t.comment.author.loginname))]),t._v(" "),n("div",{staticClass:"like-area",style:{color:t.comment.is_uped?"rgb(240, 183, 28)":""},on:{click:t.like}},[n("i",{staticClass:"iconfont icon-like"}),t._v("\n      "+t._s(t.comment.ups.length)+"\n    ")])]),t._v(" "),n("div",{staticClass:"markdown-body",domProps:{innerHTML:t._s(t.comment.content)}})])},i=[]},"90qD":function(t,e){},A82U:function(t,e,n){"use strict";function a(t){n("01yE")}var i=n("KRQT"),s=n("8waJ"),o=n("XyMi"),r=a,c=Object(o.a)(i.a,s.a,s.b,!1,r,"data-v-2daf5716",null);e.a=c.exports},AkCD:function(t,e,n){"use strict";n.d(e,"a",function(){return a}),n.d(e,"b",function(){return i});var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"person-center"},[n("van-nav-bar",{attrs:{"left-arrow":"",title:"个人信息"},on:{"click-left":t.back}}),t._v(" "),n("van-cell-group",[n("van-cell",{attrs:{title:"用户名",value:t.username}}),t._v(" "),n("van-cell",{attrs:{title:"用户头像"}},[n("template",{slot:"right-icon"},[n("img",{staticClass:"avatar",attrs:{src:t.avatar,alt:"avatar"}})])],2),t._v(" "),n("van-cell",{attrs:{title:"创建时间",value:t.createTime}}),t._v(" "),n("van-cell",{attrs:{title:"积分",value:t.score}})],1),t._v(" "),n("router-view",{staticClass:"position-page"})],1)},i=[]},C7Hz:function(t,e,n){"use strict";n.d(e,"a",function(){return a}),n.d(e,"b",function(){return i});var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("van-list",{attrs:{finished:t.finished},on:{load:t.onLoad},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},[n("transition-group",{attrs:{name:"fade"}},t._l(t.list,function(t){return n("TopicItem",{key:t.id,attrs:{topic:t}})}))],1)},i=[]},D1dt:function(t,e,n){"use strict";n.d(e,"a",function(){return a}),n.d(e,"b",function(){return i});var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"create-topic"},[n("div",{staticClass:"fixed-navbar"},[n("van-nav-bar",{attrs:{fixed:"","left-arrow":"",title:"新建话题"},on:{"click-left":t.back}})],1),t._v(" "),n("form",{staticClass:"content-wrap",on:{submit:function(e){return e.preventDefault(),t.onSubmit(e)}}},[n("div",{staticClass:"form-group"},[n("label",{attrs:{for:""}},[t._v("标题：")]),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model.trim.lazy",value:t.title,expression:"title",modifiers:{trim:!0,lazy:!0}}],staticClass:"form-input",attrs:{type:"text",required:""},domProps:{value:t.title},on:{change:function(e){t.title=e.target.value.trim()},blur:function(e){t.$forceUpdate()}}})]),t._v(" "),n("div",{staticClass:"form-group"},[n("label",{attrs:{for:""}},[t._v("类型：")]),t._v(" "),n("select",{directives:[{name:"model",rawName:"v-model",value:t.tab,expression:"tab"}],staticClass:"form-input",on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.tab=e.target.multiple?n:n[0]}}},[n("option",{attrs:{disabled:"",value:""}},[t._v("请选择类型")]),t._v(" "),t._l(t.options,function(e){return n("option",{key:e.id,domProps:{value:e.name}},[t._v(t._s(e.value))])})],2)]),t._v(" "),n("div",{staticClass:"form-group"},[n("label",{attrs:{for:""}},[t._v("内容：")]),t._v(" "),n("textarea",{directives:[{name:"model",rawName:"v-model.trim.lazy",value:t.content,expression:"content",modifiers:{trim:!0,lazy:!0}}],staticClass:"form-input",attrs:{name:"",id:"",required:"",placeholder:"请输入内容"},domProps:{value:t.content},on:{change:function(e){t.content=e.target.value.trim()},blur:function(e){t.$forceUpdate()}}})]),t._v(" "),t.submitting?n("van-button",{attrs:{type:"primary",disabled:""}},[t._v("提交中...")]):n("van-button",{attrs:{type:"primary"}},[t._v("提交")])],1)])},i=[]},DOfO:function(t,e){},F5wC:function(t,e,n){"use strict";n.d(e,"a",function(){return a}),n.d(e,"b",function(){return i});var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"info-item"},[t._m(0),t._v(" "),n("div",{staticClass:"main-area"},[n("h3",[t._v(t._s(t.author.loginname))]),t._v(" "),n("p",[t._v(t._s(t.reply.content))])]),t._v(" "),n("div",{staticClass:"date-area"},[t._v("\n    "+t._s(t._f("timeDistanceNow")(t.reply.create_at))+"\n  ")])])},i=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"avatar-area"},[n("img",{attrs:{src:"author.avatar_url",alt:""}})])}]},FRzt:function(t,e,n){"use strict";e.a={name:"TopicItem",props:{topic:Object},methods:{getColor:function(t){switch(t){case"share":return"#f44336";case"ask":return"#9c27b0";case"job":return"#03a9f4";case"dev":return"#4caf50";case"good":return"#ffc107";case"top":return"#795548";default:return""}}}}},FXJq:function(t,e,n){"use strict";n.d(e,"a",function(){return a}),n.d(e,"b",function(){return i});var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("keep-alive",{attrs:{exclude:"TopicDetail"}},[n("router-view")],1),t._v(" "),t.hasBg?n("div",{staticClass:"bg"}):t._e()],1)},i=[]},G8f8:function(t,e){},GTFK:function(t,e){},H5xs:function(t,e,n){"use strict";n.d(e,"a",function(){return a}),n.d(e,"b",function(){return i});var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"index"},[n("keep-alive",[n("router-view")],1),t._v(" "),n("van-tabbar",{model:{value:t.active,callback:function(e){t.active=e},expression:"active"}},[n("van-tabbar-item",{attrs:{to:"/"}},[n("span",[t._v("首页")]),t._v(" "),n("i",{staticClass:"iconfont icon-shouye",attrs:{slot:"icon"},slot:"icon"})]),t._v(" "),n("van-tabbar-item",{attrs:{to:"/category"}},[n("span",[t._v("分类")]),t._v(" "),n("i",{staticClass:"iconfont icon-danpin",attrs:{slot:"icon"},slot:"icon"})]),t._v(" "),n("van-tabbar-item",{attrs:{to:"/message"}},[n("span",[t._v("消息")]),t._v(" "),n("i",{staticClass:"iconfont icon-message",attrs:{slot:"icon"},slot:"icon"})]),t._v(" "),n("van-tabbar-item",{attrs:{to:"/user"}},[n("span",[t._v("我的")]),t._v(" "),n("i",{staticClass:"iconfont icon-user",attrs:{slot:"icon"},slot:"icon"})])],1)],1)},i=[]},HtpJ:function(t,e,n){"use strict";function a(t){n("xyYN")}var i=n("FRzt"),s=n("Usuj"),o=n("XyMi"),r=a,c=Object(o.a)(i.a,s.a,s.b,!1,r,"data-v-2799f528",null);e.a=c.exports},ICCK:function(t,e,n){"use strict";n.d(e,"a",function(){return a}),n.d(e,"b",function(){return i});var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"topic-detail"},[t.isLoading?[n("div",{staticClass:"mask"}),t._v(" "),n("van-loading",{staticClass:"loading-style",attrs:{size:"60px",color:"black",type:"spinner"}})]:[n("van-nav-bar",{attrs:{"left-arrow":""},on:{"click-left":t.back,"click-right":t.collect}},[n("div",{staticClass:"bar-title",attrs:{slot:"title"},slot:"title"},[n("img",{staticClass:"avatar",attrs:{src:t.detail.author.avatar_url,alt:""}}),t._v(" "),n("span",[t._v(t._s(t.detail.author.loginname))])]),t._v(" "),n("i",{staticClass:"iconfont",class:t.isCollect?"icon-jushoucanggift":"icon-jushoucang",attrs:{slot:"right"},slot:"right"})]),t._v(" "),n("div",{staticClass:"main"},[n("h3",{staticClass:"head"},[t._v(t._s(t.detail.title))]),t._v(" "),n("div",{staticClass:"markdown-body",domProps:{innerHTML:t._s(t.detail.content)}}),t._v(" "),n("div",{staticClass:"create-time"},[t._v("\n        创建于:"+t._s(t._f("timeDistanceNow")(t.detail.create_at))+"\n      ")])]),t._v(" "),n("SwitchBar",{staticClass:"detail-switch-bar",attrs:{text:t.text},on:{goto:t.gotoPath}}),t._v(" "),n("transition",{attrs:{name:"slide"}},[n("router-view")],1)]],2)},i=[]},IP27:function(t,e,n){"use strict";var a=n("Dd8w"),i=n.n(a),s=n("NYxO");e.a={name:"my-topics",data:function(){return{isLoading:!0}},props:{username:String},computed:i()({},Object(s.b)("personInfo",["recent_topics"])),beforeRouteEnter:function(t,e,n){n(function(t){e.path==="/user/"+t.username+"/createTopic"?t.$store.dispatch("personInfo/getPersonInfo",{username:t.username}).then(function(e){t.isLoading=!1}).catch(function(t){}):t.isLoading=!1})},methods:{back:function(){this.$router.push({path:"/user"})}}}},IUvi:function(t,e){},IcnI:function(t,e,n){"use strict";var a=n("/5sW"),i=n("NYxO"),s=n("mtWM"),o=(n.n(s),n("jeSg")),r=n("gy/U"),c=n("oMgr"),u=n("Pi8h");a.default.use(i.a),e.a=new i.a.Store({modules:{login:o.a,topic:r.a,message:c.a,personInfo:u.a}})},J373:function(t,e){},KPGV:function(t,e,n){"use strict";function a(t){n("/rLC")}var i=n("ZcBe"),s=n("cRA3"),o=n("XyMi"),r=a,c=Object(o.a)(i.a,s.a,s.b,!1,r,"data-v-27f19db3",null);e.a=c.exports},KRQT:function(t,e,n){"use strict";e.a={data:function(){return{}},props:{comment:Object},methods:{like:function(){sessionStorage.token?this.$store.dispatch("topic/setLike",{uped:!this.comment.is_uped,id:this.comment.id}):this.goLogin()},goLogin:function(){this.$router.replace({path:"/login",query:{redirect:this.$route.fullPath}})}}}},LTwB:function(t,e,n){"use strict";n.d(e,"a",function(){return a}),n.d(e,"b",function(){return i});var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"my-collection"},[t.isLoading?[n("div",{staticClass:"mask"}),t._v(" "),n("van-loading",{staticClass:"loading-style",attrs:{size:"60px",color:"black",type:"spinner"}})]:[n("div",{staticClass:"flex-box"},[n("van-nav-bar",{attrs:{"left-arrow":"",title:"我的收藏"},on:{"click-left":t.back}}),t._v(" "),n("div",{staticClass:"list-wrap"},t._l(t.myCollection,function(t){return n("TopicItem",{key:t.id,attrs:{topic:t}})}))],1)]],2)},i=[]},LqQp:function(t,e,n){"use strict";var a=n("Dd8w"),i=n.n(a),s=n("WmY6"),o=n("HtpJ"),r=n("qI5z"),c=n("NYxO");e.a={name:"PersonCenter",components:{Tab:s.a,TopicItem:o.a},data:function(){return{tabs:r.c,currentTab:0}},props:{username:String},computed:i()({avatar:function(){return this.$store.state.personInfo.personInfo.avatar_url},createTime:function(){var t=this.$store.state.personInfo.personInfo.create_at;return t?t.slice(0,10):t},score:function(){return this.$store.state.personInfo.personInfo.score}},Object(c.b)("personInfo",["recent_topics"]),{recentCon:function(){return[this.$store.state.personInfo.personInfo.recent_topics,this.$store.state.personInfo.personInfo.recent_replies]}}),mounted:function(){var t=this;this.$store.dispatch("personInfo/getPersonInfo",{username:this.username}).then(function(t){}).catch(function(e){t.$toast.fail(e)})},methods:{back:function(){this.$router.go(-1)},getCurrent:function(t){this.currentTab=t}}}},M7ul:function(t,e,n){"use strict";function a(t){n("UZPH")}var i=n("IP27"),s=n("QGH0"),o=n("XyMi"),r=a,c=Object(o.a)(i.a,s.a,s.b,!1,r,"data-v-f07fb948",null);e.a=c.exports},M93x:function(t,e,n){"use strict";function a(t){n("Qi+p")}var i=n("xJD8"),s=n("FXJq"),o=n("XyMi"),r=a,c=Object(o.a)(i.a,s.a,s.b,!1,r,null,null);e.a=c.exports},"Mm+O":function(t,e,n){"use strict";function a(t){n("fi05")}var i=n("LqQp"),s=n("AkCD"),o=n("XyMi"),r=a,c=Object(o.a)(i.a,s.a,s.b,!1,r,"data-v-fbb7cca0",null);e.a=c.exports},NHnr:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n("fZjL"),i=n.n(a),s=n("tcuZ"),o=(n.n(s),n("iMPx")),r=n.n(o),c=n("jydU"),u=(n.n(c),n("WQwN")),l=n.n(u),f=n("SsyO"),d=(n.n(f),n("4jjj")),p=n.n(d),v=n("eoO4"),m=(n.n(v),n("O++1")),h=n.n(m),g=n("uTM9"),_=(n.n(g),n("Jq84")),b=n.n(_),C=n("Mcfu"),y=(n.n(C),n("r9aq")),k=n.n(y),$=n("3evy"),x=(n.n($),n("Irlo")),L=n.n(x),w=n("CCOf"),T=(n.n(w),n("rrcz")),j=n.n(T),I=n("jgNZ"),M=(n.n(I),n("syWm")),O=n.n(M),S=n("dKGA"),E=(n.n(S),n("kSul")),P=n.n(E),q=n("FDxC"),N=(n.n(q),n("w+oK")),X=n.n(N),D=n("QP/A"),A=(n.n(D),n("pyxX")),U=n.n(A),J=n("cnGM"),z=(n.n(J),n("S6j6")),H=n.n(z),Q=n("GKy3"),R=(n.n(Q),n("4vvA")),Y=n.n(R),Z=n("MHRi"),W=(n.n(Z),n("6xqC")),F=n.n(W),G=n("ZV4y"),K=(n.n(G),n("fcGX")),B=n.n(K),V=n("/5sW"),tt=n("M93x"),et=n("YaEn"),nt=n("IcnI"),at=n("mtWM"),it=n.n(at),st=n("Q0Ca"),ot=n("J373");n.n(ot);V.default.use(r.a).use(l.a).use(p.a).use(h.a).use(b.a).use(k.a).use(L.a).use(j.a).use(O.a).use(P.a).use(X.a).use(U.a).use(H.a).use(Y.a).use(F.a).use(B.a),it.a.defaults.baseURL="https://cnodejs.org/api/v1",V.default.prototype.$axios=it.a,window.axios=it.a,i()(st).forEach(function(t){V.default.filter(t,st[t])}),new V.default({el:"#app",router:et.a,store:nt.a,render:function(t){return t(tt.a)}})},NtoT:function(t,e,n){"use strict";var a=n("mvHQ"),i=n.n(a);e.a={data:function(){return{accesstoken:""}},methods:{onClickLeft:function(){this.$router.go(-1)},submit:function(){var t=this;if(!this.accesstoken)return void this.$toast.fail("请输入Access Token");this.$axios.post("/accesstoken",{accesstoken:this.accesstoken}).then(function(e){console.log(e),sessionStorage.token=t.accesstoken;var n={loginname:e.data.loginname,id:e.data.id,avatar_url:e.data.avatar_url};sessionStorage.user=i()(n),t.$store.commit("login/setLogin",{user:n}),t.$router.replace(t.$route.query.redirect||"/")}).catch(function(e){t.$toast.fail(e)})}},mounted:function(){}}},Pi8h:function(t,e,n){"use strict";var a=n("//Fk"),i=n.n(a),s={personInfo:{},myCollection:[],myTopics:[]},o={recent_topics:function(t){return t.personInfo.recent_topics},loginname:function(t){return t.personInfo.loginname}},r={getPersonInfo:function(t,e){var n=t.commit;return new i.a(function(t,a){axios.get("/user/"+e.username).then(function(e){n("setPersonInfo",e.data.data),t(e)}).catch(function(t){a(t)})})},getMyCollection:function(t,e){var n=t.commit;return axios.get("/topic_collect/"+e.username).then(function(t){return n("setMyCollection",t.data.data),i.a.resolve(t)}).catch(function(t){return i.a.reject(t)})},createTopic:function(t,e){var n=t.commit;return new i.a(function(t,a){axios.post("/topics",{accesstoken:e.accesstoken,title:e.title,tab:e.tab,content:e.content}).then(function(e){n("createTopic",e.data.topic_id),t(e)}).catch(function(t){a(t)})})}},c={setPersonInfo:function(t,e){t.personInfo=e},setMyCollection:function(t,e){t.myCollection=e},createTopic:function(t,e){t.myTopics.push(e)}};e.a={namespaced:!0,state:s,getters:o,actions:r,mutations:c}},PqI4:function(t,e,n){"use strict";function a(t){n("jbRx")}var i=n("r8Uj"),s=n("C7Hz"),o=n("XyMi"),r=a,c=Object(o.a)(i.a,s.a,s.b,!1,r,"data-v-9fd7fb60",null);e.a=c.exports},Q0Ca:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),n.d(e,"timeDistanceNow",function(){return a}),n.d(e,"strToChinese",function(){return i});var a=function(t){var e=new Date(t).getTime(),n=(new Date).getTime(),a=n-e;if(a>=31536e6){return Math.floor(a/31536e6)+"年前"}if(a>=864e5){return Math.floor(a/864e5)+"天前"}if(a>=36e5){return Math.floor(a/36e5)+"小时前"}if(a>=6e4){return Math.floor(a/6e4)+"分钟前"}return"刚刚"},i=function(t){switch(t){case"share":return"分享";case"ask":return"问答";case"job":return"招聘";case"dev":return"测试";case"good":return"精华";case"top":return"置顶";default:return""}}},QGH0:function(t,e,n){"use strict";n.d(e,"a",function(){return a}),n.d(e,"b",function(){return i});var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"my-topics"},[t.isLoading?[n("div",{staticClass:"mask"}),t._v(" "),n("van-loading",{staticClass:"loading-style",attrs:{size:"60px",color:"black",type:"spinner"}})]:[n("div",{staticClass:"flex-box"},[n("van-nav-bar",{attrs:{"left-arrow":"",title:"我的话题"},on:{"click-left":t.back}}),t._v(" "),n("div",{staticClass:"list-wrap"},t._l(t.recent_topics,function(e){return n("div",{key:e.id,staticClass:"topic-item"},[n("div",{staticClass:"header"},[n("div",{staticClass:"author-info-box"},[n("a",{staticClass:"avatar-link"},[n("img",{staticClass:"avatar",attrs:{src:e.author.avatar_url,alt:""}})]),t._v(" "),n("div",{staticClass:"name-and-time"},[n("h3",{staticClass:"author-name"},[t._v(t._s(e.author.loginname))])])])]),t._v(" "),n("router-link",{staticClass:"body",attrs:{to:"/topic/"+e.id}},[t._v(t._s(e.title))])],1)}))],1)]],2)},i=[]},"Qi+p":function(t,e){},ToMd:function(t,e,n){"use strict";e.a={data:function(){return{comment:""}},props:{text:String},computed:{value:function(){return this.comment?"评论":this.text},placeholder:function(){return this.$store.state.login.isLogin?"快来评论":"登录后才可评论"}},methods:{goto:function(){this.$emit("goto",this.comment)}}}},"UKa+":function(t,e,n){"use strict";n.d(e,"a",function(){return a}),n.d(e,"b",function(){return i});var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"comments"},[n("div",{staticClass:"comments-inner"},[n("van-nav-bar",{attrs:{"left-arrow":"",title:"评论"},on:{"click-left":t.back}}),t._v(" "),n("van-cell-group",{staticClass:"main"},[t.replies.length>=1?t._l(t.replies,function(t,e){return n("Comment",{key:e,attrs:{comment:t}})}):[n("p",{staticClass:"no-comments"},[t._v("暂时没有评论")])]],2),t._v(" "),n("SwitchBar",{staticClass:"comment-switch-bar",attrs:{text:t.text},on:{goto:t.gotoPath}})],1)])},i=[]},UOlw:function(t,e,n){"use strict";var a=n("HtpJ"),i=n("PqI4");e.a={name:"home",components:{TopicItem:a.a,TopicList:i.a},data:function(){return{isLoading:!1,pos:0,target:"",pullLoading:!1,pullList:[]}},activated:function(){},methods:{toGithub:function(){location="https://github.com/simple77/cnode"},onScroll:function(t){this.target=t.target},onRefresh:function(){var t=this;this.$axios.get("/topics",{params:{page:1,limit:20,tab:"all"}}).then(function(e){t.pullList=e.data.data,t.$toast("下拉刷新成功"),t.pullLoading=!1}).catch(function(e){t.$toast.fail(e)})}},created:function(){},mounted:function(){},beforeRouteLeave:function(t,e,n){this.target&&(this.pos=this.target.scrollTop),n()},beforeRouteEnter:function(t,e,n){n(function(t){t.target&&t.target.scrollTo(0,t.pos)})}}},UZPH:function(t,e){},Usuj:function(t,e,n){"use strict";n.d(e,"a",function(){return a}),n.d(e,"b",function(){return i});var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"topic-item"},[n("div",{staticClass:"header"},[n("div",{staticClass:"author-info-box"},[n("a",{staticClass:"avatar-link"},[n("img",{staticClass:"avatar",attrs:{src:t.topic.author.avatar_url,alt:""}})]),t._v(" "),n("div",{staticClass:"name-and-time"},[n("h3",{staticClass:"author-name"},[t._v(t._s(t.topic.author.loginname))]),t._v(" "),n("p",{staticClass:"create-time"},[t._v(t._s(t._f("timeDistanceNow")(t.topic.create_at)))])])]),t._v(" "),n("div",{staticClass:"topic-type-box"},[n("div",{staticClass:"topic-type",style:{background:t.getColor(t.topic.tab)}},[t._v(t._s(t._f("strToChinese")(t.topic.tab)))])])]),t._v(" "),n("router-link",{staticClass:"body",attrs:{to:"/topic/"+t.topic.id}},[t._v(t._s(t.topic.title))]),t._v(" "),n("div",{staticClass:"footer"},[n("div",{staticClass:"visit-count"},[n("i",{staticClass:"iconfont icon-yuedu"}),t._v("\n      "+t._s(t.topic.visit_count)+"\n    ")]),t._v(" "),n("div",{staticClass:"reply-count"},[n("i",{staticClass:"iconfont icon-liuyan"}),t._v("\n      "+t._s(t.topic.reply_count)+"\n    ")]),t._v(" "),n("div",{staticClass:"last-reply-time"},[t._v("\n      "+t._s(t._f("timeDistanceNow")(t.topic.last_reply_at))+"\n    ")])])],1)},i=[]},VpIt:function(t,e,n){"use strict";e.a={data:function(){return{active:0,pos:[]}},props:{tabs:Array},computed:{width:function(){return 100/this.tabs.length+"%"}},created:function(){var t=this;this.tabs.forEach(function(e,n){t.pos.push({id:n,scrollTop:0})})},methods:{tabClick:function(t){var e=this,n=document.documentElement.scrollTop||document.body.scrollTop;this.pos[this.active].scrollTop=n,this.active=t,this.$emit("tab",t),this.$nextTick(function(){window.scrollTo(0,e.pos[t].scrollTop)})}}}},WmY6:function(t,e,n){"use strict";function a(t){n("G8f8")}var i=n("VpIt"),s=n("+JmE"),o=n("XyMi"),r=a,c=Object(o.a)(i.a,s.a,s.b,!1,r,"data-v-471600f2",null);e.a=c.exports},XnXy:function(t,e,n){"use strict";var a=n("qI5z");e.a={name:"create-topic",data:function(){return{title:"",content:"",tab:"",submitting:!1}},computed:{options:function(){return a.a.slice(0,4)}},methods:{back:function(){this.$router.go(-1)},onSubmit:function(){var t=this;this.title&&this.tab&&this.content&&(this.submitting=!0,this.$store.dispatch("personInfo/createTopic",{accesstoken:sessionStorage.token,title:this.title,tab:this.tab,content:this.content}).then(function(e){t.submitting=!1,t.$router.push({path:t.$route.fullPath.slice(0,-12)+"/myTopics"})}).catch(function(e){t.$toast.fail(e),t.submitting=!1}))}},beforeRouteLeave:function(t,e,n){"/user"===t.path&&(this.title||""!==this.tab||this.content)?this.$dialog.confirm({title:"你有未保存的更改，你真的想离开吗？"}).then(function(){n()}).catch(function(){n(!1)}):n()}}},YaEn:function(t,e,n){"use strict";var a=n("/5sW"),i=n("/ocq"),s=n("mlqX"),o=n("j7e0"),r=n("fXvj"),c=n("KPGV"),u=n("i/Eh"),l=n("lmfZ"),f=n("eqAl"),d=n("mCIm"),p=n("Mm+O"),v=n("dtjv"),m=n("6Csb"),h=n("M7ul");a.default.use(i.a);var g=[{path:"/",component:s.a,children:[{path:"/",component:o.a},{path:"category",component:r.a},{path:"message",component:c.a},{path:"user",component:u.a}]},{path:"/user/:username",component:p.a,props:!0,name:"username",children:[{path:"myTopics",component:h.a,props:!0},{path:"collection",component:v.a,props:!0},{path:"createTopic",component:m.a}]},{path:"/login",component:l.a},{path:"/topic/:id",component:f.a,props:!0,children:[{path:"reply",component:d.a}]}],_=new i.a({routes:g});e.a=_},Z8mK:function(t,e,n){"use strict";n.d(e,"a",function(){return a}),n.d(e,"b",function(){return i});var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"home"},[n("van-nav-bar",{attrs:{title:"CNode.js中文社区"},on:{"click-right":t.toGithub}},[n("van-icon",{attrs:{slot:"right",name:"wap-home"},slot:"right"})],1),t._v(" "),n("div",{staticClass:"list-wrap",on:{scroll:t.onScroll}},[n("van-pull-refresh",{on:{refresh:t.onRefresh},model:{value:t.pullLoading,callback:function(e){t.pullLoading=e},expression:"pullLoading"}},[n("TopicList",{attrs:{pullList:t.pullList,listType:"all"}})],1)],1)],1)},i=[]},ZcBe:function(t,e,n){"use strict";var a=n("qI5z"),i=n("WmY6"),s=n("ZkxY");n("NYxO");e.a={name:"message",components:{Tab:i.a,InfoItem:s.a},data:function(){return{messageList:a.b,currentTab:0}},computed:{isLogin:function(){return this.$store.state.login.isLogin},infoCollection:function(){return[this.$store.state.message.has_read_messages,this.$store.state.message.hasnot_read_messages]}},methods:{getCurrent:function(t){this.currentTab=t},goLogin:function(){this.$router.replace({path:"/login",query:{redirect:this.$router.history.current.fullPath}})}},mounted:function(){var t=this;this.isLogin&&this.$axios.get("/messages",{params:{accesstoken:sessionStorage.token}}).then(function(e){var n=e.data.data;t.$store.commit("message/setMessage",{has_read_messages:n.has_read_messages,hasnot_read_messages:n.hasnot_read_messages})}).catch(function(e){t.$toast.fail(e)})}}},ZkxY:function(t,e,n){"use strict";function a(t){n("tAhk")}var i=n("+y7f"),s=n("F5wC"),o=n("XyMi"),r=a,c=Object(o.a)(i.a,s.a,s.b,!1,r,"data-v-8f036e0c",null);e.a=c.exports},cRA3:function(t,e,n){"use strict";n.d(e,"a",function(){return a}),n.d(e,"b",function(){return i});var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"message"},[n("Tab",{attrs:{tabs:t.messageList},on:{tab:t.getCurrent}},[t.isLogin?n("div",{staticClass:"login-display"},[n("keep-alive",t._l(t.infoCollection,function(e,a){return t.currentTab===a?n("van-cell-group",{key:a,class:{"no-bgborder":e.length<1}},[e.length>=1?t._l(e,function(t){return n("van-cell",{key:t.id},[n("InfoItem",{attrs:{author:t.author,reply:t.reply}})],1)}):[n("van-cell",{staticClass:"no-bg"},[n("p",{staticClass:"no-info"},[t._v("no info")])])]],2):t._e()}))],1):n("div",{staticClass:"login-tip"},[n("h2",[t._v("登录后可查看")]),t._v(" "),n("van-button",{attrs:{type:"primary",text:"登录"},on:{click:t.goLogin}})],1)])],1)},i=[]},cmQW:function(t,e,n){"use strict";e.a={name:"user",data:function(){return{}},mounted:function(){},computed:{getAvatar:function(){return this.$store.state.login.user.avatar_url},isLogin:function(){return this.$store.state.login.isLogin},title:function(){return this.isLogin?this.$store.state.login.user.loginname:"用户中心"}},methods:{goLogin:function(){this.$router.replace({path:"/login",query:{redirect:this.$router.history.current.fullPath}})},goOut:function(){sessionStorage.setItem("token",""),location.reload()},goPersonCenter:function(){this.$router.push({path:"/user/"+this.title})},goMyCollection:function(){this.$router.push({path:"/user/"+this.title+"/collection"})},goCreateTopic:function(){this.$router.push({path:"/user/"+this.title+"/createTopic"})},goMyTopics:function(){this.$router.push({path:"/user/"+this.title+"/myTopics"})},toast:function(){this.$toast.fail("请先登录")}}}},dCOM:function(t,e){},dhAS:function(t,e,n){"use strict";var a=n("Dd8w"),i=n.n(a),s=n("NYxO"),o=n("HtpJ");e.a={name:"MyCollection",components:{TopicItem:o.a},data:function(){return{isLoading:!0}},props:{username:String},computed:i()({},Object(s.c)("personInfo",["myCollection"]),Object(s.b)("personInfo",["loginname"])),beforeRouteEnter:function(t,e,n){n(function(t){t.isLoading=!0,t.$store.dispatch("personInfo/getMyCollection",{username:t.username}).then(function(e){t.isLoading=!1}).catch(function(e){t.$toast.fail(e)})})},methods:{back:function(){this.$router.go(-1)}}}},dtjv:function(t,e,n){"use strict";function a(t){n("lHd0")}var i=n("dhAS"),s=n("LTwB"),o=n("XyMi"),r=a,c=Object(o.a)(i.a,s.a,s.b,!1,r,"data-v-4753def4",null);e.a=c.exports},eqAl:function(t,e,n){"use strict";function a(t){n("fNFj")}var i=n("svNQ"),s=n("ICCK"),o=n("XyMi"),r=a,c=Object(o.a)(i.a,s.a,s.b,!1,r,"data-v-7808438d",null);e.a=c.exports},fFEV:function(t,e){},fNFj:function(t,e){},fXvj:function(t,e,n){"use strict";var a=n("pRJA"),i=n("jkQr"),s=n("XyMi"),o=Object(s.a)(a.a,i.a,i.b,!1,null,null,null);e.a=o.exports},fi05:function(t,e){},"gy/U":function(t,e,n){"use strict";var a=n("/5sW"),i={isLoading:!1,detail:{author:{}}},s={},o={getDetail:function(t,e){var n=t.commit,i=t.rootState,s={};s=i.login.isLogin?{mdrender:!0,accesstoken:sessionStorage.token}:{mdrender:!0},axios.get("/topic/"+e.id,{params:s}).then(function(t){n("setLoading",!1);var e=t.data.data;n("setDetail",e)}).catch(function(t){throw a.default.prototype.$toast.fail(t),new Error(t)})},setCollect:function(t,e){var n=t.commit;axios.post("/topic_collect/collect",{accesstoken:sessionStorage.token,topic_id:e.id}).then(function(t){n("setCollect",e.collect),a.default.prototype.$toast("收藏成功")}).catch(function(t){throw a.default.prototype.$toast.fail(t),new Error(t)})},delCollect:function(t,e){var n=t.commit;axios.post("/topic_collect/de_collect ",{accesstoken:sessionStorage.token,topic_id:e.id}).then(function(t){n("delCollect",e.collect),a.default.prototype.$toast("取消收藏")}).catch(function(t){throw a.default.prototype.$toast.fail(t),new Error(t)})},setLike:function(t,e){var n=t.commit;t.state;axios.post("/reply/"+e.id+"/ups",{accesstoken:sessionStorage.token}).then(function(t){n("setLike",e)}).catch(function(t){throw console.log(t),a.default.prototype.$toast.fail("不能帮自己点赞"),new Error(t)})},reply:function(t,e){var n=t.commit,i=t.state;axios.post("/topic/"+i.detail.id+"/replies",{accesstoken:sessionStorage.token,content:e.comment}).then(function(t){n("reply",e),location.reload()}).catch(function(t){throw a.default.prototype.$toast.fail(t),new Error(t)})}},r={setLoading:function(t,e){t.isLoading=e},setDetail:function(t,e){t.detail=e},setCollect:function(t,e){t.detail.is_collect=e},delCollect:function(t,e){t.detail.is_collect=e},setLike:function(t,e){t.detail.replies.forEach(function(t){t.id===e.id&&(t.is_uped=e.uped,e.uped?t.ups.push(e.id):t.ups.pop())})},reply:function(t,e){t.detail.replies.push({author:{avatar_url:e.user.avatar_url,loginname:e.user.loginname},content:e.comment,create_at:new Date,id:t.detail.id,is_uped:!1,reply_id:null})}};e.a={namespaced:!0,state:i,getters:s,actions:o,mutations:r}},hiLN:function(t,e){},"i/Eh":function(t,e,n){"use strict";function a(t){n("u6aL")}var i=n("cmQW"),s=n("0Ea2"),o=n("XyMi"),r=a,c=Object(o.a)(i.a,s.a,s.b,!1,r,"data-v-90cbbb68",null);e.a=c.exports},itIU:function(t,e){},j7e0:function(t,e,n){"use strict";function a(t){n("jiBg")}var i=n("UOlw"),s=n("Z8mK"),o=n("XyMi"),r=a,c=Object(o.a)(i.a,s.a,s.b,!1,r,"data-v-6b9e47cc",null);e.a=c.exports},jbRx:function(t,e){},jeSg:function(t,e,n){"use strict";var a={isLogin:!!sessionStorage.token,user:{avatar_url:sessionStorage.user?JSON.parse(sessionStorage.user).avatar_url:"",loginname:sessionStorage.user?JSON.parse(sessionStorage.user).loginname:"",id:sessionStorage.user?JSON.parse(sessionStorage.user).id:""}},i={},s={},o={setLogin:function(t,e){t.isLogin=!0,t.user=e.user}};e.a={namespaced:!0,state:a,getters:i,actions:s,mutations:o}},jiBg:function(t,e){},jkQr:function(t,e,n){"use strict";n.d(e,"a",function(){return a}),n.d(e,"b",function(){return i});var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"category"},[n("Tab",{attrs:{tabs:t.categoryList},on:{tab:t.getCurrent}},[n("keep-alive",t._l(t.categoryList,function(e,a){return a===t.currentTab?n("TopicList",{key:a,attrs:{pullList:t.pullList,listType:e.name}}):t._e()}))],1)],1)},i=[]},lHd0:function(t,e){},lmfZ:function(t,e,n){"use strict";function a(t){n("90qD")}var i=n("NtoT"),s=n("vZFb"),o=n("XyMi"),r=a,c=Object(o.a)(i.a,s.a,s.b,!1,r,"data-v-474ca092",null);e.a=c.exports},m7zo:function(t,e){},mCIm:function(t,e,n){"use strict";function a(t){n("hiLN")}var i=n("6/+i"),s=n("UKa+"),o=n("XyMi"),r=a,c=Object(o.a)(i.a,s.a,s.b,!1,r,"data-v-1a77ad59",null);e.a=c.exports},mlqX:function(t,e,n){"use strict";function a(t){n("IUvi")}var i=n("tk/L"),s=n("H5xs"),o=n("XyMi"),r=a,c=Object(o.a)(i.a,s.a,s.b,!1,r,"data-v-ea8c54e0",null);e.a=c.exports},o3Tq:function(t,e){},oMgr:function(t,e,n){"use strict";var a={has_read_messages:[],hasnot_read_messages:[]},i={},s={},o={setMessage:function(t,e){t.has_read_messages=e.has_read_messages,t.hasnot_read_messages=e.hasnot_read_messages}};e.a={namespaced:!0,state:a,getters:i,actions:s,mutations:o}},pRJA:function(t,e,n){"use strict";var a=n("qI5z"),i=n("PqI4"),s=n("WmY6");e.a={name:"category",data:function(){return{categoryList:a.a,currentTab:0,pullList:[]}},components:{TopicList:i.a,Tab:s.a},created:function(){},methods:{getCurrent:function(t){this.currentTab=t}}}},qCSc:function(t,e){},qI5z:function(t,e,n){"use strict";n.d(e,"a",function(){return a}),n.d(e,"b",function(){return i}),n.d(e,"c",function(){return s});var a=[{id:0,name:"share",value:"分享",color:""},{id:1,name:"ask",value:"问答",color:""},{id:2,name:"job",value:"招聘",color:""},{id:3,name:"dev",value:"测试",color:""},{id:4,name:"good",value:"精华",color:""}],i=[{id:0,name:"unknown",value:"未读消息"},{id:1,name:"read",value:"已读消息"}],s=[{id:0,value:"最近话题"},{id:1,value:"最近评论"}]},qzWe:function(t,e){},r8Uj:function(t,e,n){"use strict";var a=n("Gu7T"),i=n.n(a),s=n("HtpJ");e.a={components:{TopicItem:s.a},props:{listType:String,pullList:Array},data:function(){return{loading:!0,finished:!1,page:1,list:[]}},computed:{},methods:{onLoad:function(){this.axiosData(this.page,20,this.listType)},axiosData:function(t,e,n){var a=this;this.$axios.get("/topics",{params:{page:t,limit:e,tab:n}}).then(function(t){var e=t.data;if(e.success&&e.data.length>=1){var n;(n=a.list).push.apply(n,i()(e.data)),a.loading=!1,a.page++}e.data.length<1&&(a.finished=!0)}).catch(function(t){a.$toast.fail(t)})}},created:function(){if(0===this.pullList.length)this.onLoad();else{var t;(t=this.list).push.apply(t,i()(this.pullList))}}}},svNQ:function(t,e,n){"use strict";var a=n("svOl");e.a={name:"TopicDetail",components:{SwitchBar:a.a},data:function(){return{text:"查看评论"}},props:{id:String},computed:{isLoading:function(){return this.$store.state.topic.isLoading},detail:function(){return this.$store.state.topic.detail},isCollect:function(){return this.$store.state.topic.detail.is_collect}},methods:{collect:function(){sessionStorage.token?this.isCollect?this.$store.dispatch("topic/delCollect",{collect:!this.isCollect,id:this.id}):this.$store.dispatch("topic/setCollect",{collect:!this.isCollect,id:this.id}):this.goLogin()},goLogin:function(){this.$router.replace({path:"/login",query:{redirect:this.$route.fullPath}})},back:function(){this.$router.go(-1)},gotoPath:function(t){t?sessionStorage.token?this.$store.dispatch("topic/reply",{comment:t,user:this.$store.state.login.user}):this.$toast.fail("登录后才可评论"):this.$router.push(this.$route.fullPath+"/reply")}},created:function(){this.$store.commit("topic/setLoading",!0),this.$store.dispatch("topic/getDetail",{id:this.id})}}},svOl:function(t,e,n){"use strict";function a(t){n("3bEh")}var i=n("ToMd"),s=n("zyr1"),o=n("XyMi"),r=a,c=Object(o.a)(i.a,s.a,s.b,!1,r,"data-v-cefdb73c",null);e.a=c.exports},tAhk:function(t,e){},"tk/L":function(t,e,n){"use strict";e.a={data:function(){return{active:0}},methods:{},mounted:function(){switch(this.$router.history.current.fullPath){case"/":this.active=0;break;case"/category":this.active=1;break;case"/message":this.active=2;break;case"/user":this.active=3;break;default:this.active=4}}}},u6aL:function(t,e){},vZFb:function(t,e,n){"use strict";n.d(e,"a",function(){return a}),n.d(e,"b",function(){return i});var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"login"},[n("div",{staticClass:"fixed-navbar"},[n("van-nav-bar",{attrs:{fixed:"",title:"登录","left-arrow":""},on:{"click-left":t.onClickLeft}})],1),t._v(" "),n("div",{staticClass:"form"},[n("van-cell",{attrs:{border:!1}},[n("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.accesstoken,expression:"accesstoken",modifiers:{trim:!0}}],attrs:{type:"text",placeholder:"请输入Access Token"},domProps:{value:t.accesstoken},on:{input:function(e){e.target.composing||(t.accesstoken=e.target.value.trim())},blur:function(e){t.$forceUpdate()}}})]),t._v(" "),n("van-button",{attrs:{type:"primary",text:"登录"},on:{click:t.submit}}),t._v(" "),n("p",{staticClass:"tip"},[t._v("提示：可通过我的Access Token登录，c0e67253-b88e-442b-b278-49fe40a9871f")])],1)])},i=[]},xJD8:function(t,e,n){"use strict";n("eqAl");e.a={name:"app",mounted:function(){console.log(this.$router),console.log(this.$store)},computed:{hasBg:function(){return-1===this.$route.fullPath.indexOf("login")}}}},xL5C:function(t,e){},xyYN:function(t,e){},zyr1:function(t,e,n){"use strict";n.d(e,"a",function(){return a}),n.d(e,"b",function(){return i});var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"switch-bar"},[n("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.comment,expression:"comment",modifiers:{trim:!0}}],attrs:{type:"text",placeholder:t.placeholder},domProps:{value:t.comment},on:{input:function(e){e.target.composing||(t.comment=e.target.value.trim())},blur:function(e){t.$forceUpdate()}}}),n("button",{on:{click:t.goto}},[t._v(t._s(t.value))])])},i=[]}},["NHnr"]);
//# sourceMappingURL=app.af599121aba08f4c4a82.js.map